(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{64:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(23),s=c.n(a),o=(c(35),c(36),c(5)),i=c(3),l=c.n(i),u=c(6),d="http://localhost:8900/api/v1",j=function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window){e.next=13;break}return localStorage.removeItem("jwt"),t(),e.prev=3,e.next=6,fetch("".concat(d,"/signout"),{method:"GET"});case 6:e.sent&&console.log("Signout successfull!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},h=c(2),O=c(7),f=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#fff"}},x=[{_id:0,name:"Any",array:[]},{_id:1,name:"$0 to $9",array:[0,9]},{_id:2,name:"$10 to $19",array:[10,19]},{_id:3,name:"$20 to $29",array:[20,29]},{_id:4,name:"$30 to $39",array:[20,29]},{_id:5,name:"More than $40",array:[40,99]}],v=c(0);var g=Object(O.g)((function(e){var t=e.history;return Object(v.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(o.b,{className:"navbar-brand",to:"/",children:"Shoppers"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(v.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link active","aria-current":"page",to:"/",style:f(t,"/"),children:"Home"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link active","aria-current":"page",to:"/shop",style:f(t,"/shop"),children:"Shop"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsxs)(o.b,{className:"nav-link active","aria-current":"page",to:"/cart",style:f(t,"/cart"),children:["Cart ",Object(v.jsx)("span",{className:"badge bg-secondary",children:"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0})]})}),p()&&0===p().foundUser.role&&Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link active","aria-current":"page",to:"/user/dashboard",style:f(t,"/user/dashboard"),children:"Dashboard"})}),p()&&1===p().foundUser.role&&Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link active","aria-current":"page",to:"/admin/dashboard",style:f(t,"/admin/dashboard"),children:"Dashboard"})}),!p()&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/signup",style:f(t,"/signup"),children:"Sign up"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/signin",style:f(t,"/signin"),children:"Sign in"})})]}),p()&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)("span",{className:"nav-link",style:{cursor:"pointer",color:"#fff"},onClick:function(){return m((function(){return t.push("/")}))},children:"Sign out"})})})]})})]})})})),N=function(e){var t=e.title,c=void 0===t?"Title":t,n=e.description,r=void 0===n?"Description":n,a=e.className,s=e.children;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g,{}),Object(v.jsx)("div",{className:"rounded-lg bg-light p-5 mb-5",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h2",{children:c}),Object(v.jsx)("p",{className:"lead",children:r})]})}),Object(v.jsx)("div",{className:a,children:s})]})},y=c(21),w=["component"],S=function(e){var t=e.component,c=Object(y.a)(e,w);return Object(v.jsx)(O.b,Object(h.a)(Object(h.a)({},c),{},{render:function(e){return p()?Object(v.jsx)(t,Object(h.a)({},e)):Object(v.jsx)(O.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},k=["component"],C=function(e){var t=e.component,c=Object(y.a)(e,k);return Object(v.jsx)(O.b,Object(h.a)(Object(h.a)({},c),{},{render:function(e){return p()&&1===p().foundUser.role?Object(v.jsx)(t,Object(h.a)({},e)):Object(v.jsx)(O.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},T=c(4),P=function(e){var t=e.item,c=e.url;return Object(v.jsx)("div",{className:"product-img",children:Object(v.jsx)("img",{src:"".concat(d,"/").concat(c,"/photo/").concat(t._id),alt:t.name,className:"mb-3 card-img-top"})})},A=c(15),I=c.n(A),F=function(e){var t,c=e.product,r=e.cartUpdate,a=void 0!==r&&r,s=e.showViewProductButton,i=void 0===s||s,l=e.showAddToCartButton,u=void 0===l||l,d=e.showRemoveProductButton,j=void 0!==d&&d,b=Object(n.useState)(!1),m=Object(T.a)(b,2),p=m[0],f=m[1],x=Object(n.useState)(c.count),g=Object(T.a)(x,2),N=g[0],y=g[1],w=function(e){return function(t){y(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.map((function(n,r){return n._id===e&&(c[r].count=t),n})),localStorage.setItem("cart",JSON.stringify(c)))}(e,t.target.value)}},S=function(){!function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(h.a)(Object(h.a)({},e),{},{count:1})),c=Array.from(new Set(c.map((function(e){return e._id})))).map((function(e){return c.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(c)),t())}(c,(function(){f(!0)}))};return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"card-header name",children:c.name}),Object(v.jsxs)("div",{className:"card-body",children:[function(){if(p)return Object(v.jsx)(O.a,{to:"/cart"})}(),Object(v.jsx)(P,{item:c,url:"product"}),Object(v.jsx)("p",{className:"card-text lead",children:c.description.substring(0,50)}),Object(v.jsxs)("p",{className:"card-text black-10",children:["$ ",c.price]}),Object(v.jsxs)("div",{className:"",children:[Object(v.jsx)("span",{className:"mr-2 block",children:"Category"}),Object(v.jsx)("span",{className:"badge bg-light text-dark",children:c.category&&c.category.name})]}),Object(v.jsxs)("p",{className:"black-8 my-2",children:["Added ",I()(c.createdAt).fromNow()]}),Object(v.jsx)("div",{children:(t=c.quantity,t>0?Object(v.jsx)("span",{className:"badge badge-success badge-pill",children:"In Stock"}):Object(v.jsx)("span",{className:"badge badge-danger badge-pill",children:"Out of Stock"}))}),function(e){return e&&Object(v.jsxs)("button",{onClick:S,className:"btn btn-sm btn-dark mt-2 mb-2 mr-2",children:["Add to cart"," "]})}(u),function(e){return e&&Object(v.jsx)(o.b,{to:"/products/".concat(c._id),children:Object(v.jsx)("button",{className:"btn btn-success btn-sm  mt-2 mb-2",children:"View Details"})})}(i),function(e){return e&&Object(v.jsx)("button",{onClick:function(){return function(e){var t=[];return"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,n){return c._id===e&&t.splice(n,1),t})),localStorage.setItem("cart",JSON.stringify(t))),t}(c._id)},className:"btn btn-danger btn-sm  mt-2 mb-2",children:"Remove Product"})}(j),function(e){return e&&Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("div",{className:"input-group-prepend",children:Object(v.jsx)("span",{className:"input-group-text",children:"Adjust quantity"})}),Object(v.jsx)("input",{value:N,onChange:w(c._id),type:"number",className:"form-control",name:""})]})})}(a)]})]})},_=c(18);function D(e){var t=e.categories,c=e.handleFilters,r=Object(n.useState)([]),a=Object(T.a)(r,2),s=a[0],o=a[1],i=function(e){return function(){var t=s.indexOf(e),n=Object(_.a)(s);-1===t?n.push(e):n.splice(t,1),o(n),c(n)}};return Object(v.jsx)(v.Fragment,{children:t.map((function(e){return Object(v.jsxs)("li",{className:"list-unstyled checkbox-list",children:[Object(v.jsx)("input",{onChange:i(e._id),value:s.indexOf(-1===e._id),type:"checkbox",className:"form-check-input me-2"}),Object(v.jsx)("label",{htmlFor:"",className:"form-check-label",children:e.name})]},e.name)}))})}var E=c(9),U=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/category/create/").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(n)});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/categories"),{method:"GET"});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),J=c(29),z=c.n(J),q=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/products/create/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(c)},body:n});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/products?sortBy=").concat(t,"&order=desc&limit=6"),{method:"GET"});case 3:return c=e.sent,e.abrupt("return",c.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n,r,a,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},r={skip:t,limit:c,filters:n},e.prev=2,e.next=5,fetch("".concat(d,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return a=e.sent,e.abrupt("return",a.json());case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,c){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=z.a.stringify(t),e.next=4,fetch("".concat(d,"/products/search?").concat(c),{method:"GET"});case 4:return n=e.sent,e.abrupt("return",n.json());case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/products/related/").concat(t),{method:"GET"});case 3:return c=e.sent,e.abrupt("return",c.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("${API}/products?limit=undefined",{method:"GET"});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/products/").concat(t,"/").concat(c),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/products/").concat(t),{method:"GET"});case 3:return c=e.sent,e.abrupt("return",c.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/products/").concat(t,"/").concat(c),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)},body:r});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n,r){return e.apply(this,arguments)}}();function Q(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(T.a)(e,2),c=t[0],r=t[1],a=c.categories,s=c.category,o=c.search,i=c.results,l=c.searched;Object(n.useEffect)((function(){B().then((function(e){e.error?console.log(e.error):r(Object(h.a)(Object(h.a)({},e),{},{categories:e}))}))}),[]);var u=function(e){return function(t){var n;r(Object(h.a)(Object(h.a)({},c),{},(n={},Object(E.a)(n,e,t.target.value),Object(E.a)(n,"searched",!1),n)))}},d=function(e){e.preventDefault(),o&&R({search:o||void 0,category:s}).then((function(e){e.error?console.log(e.error):r(Object(h.a)(Object(h.a)({},c),{},{results:e,searched:!0}))}))},j=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products"):e&&t.length<1?"No products found":void 0};return Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("form",{onSubmit:d,className:"mb-3",children:Object(v.jsxs)("span",{className:"input-group-text",children:[Object(v.jsxs)("div",{className:"input-group input-group-lg",children:[Object(v.jsx)("div",{className:"input-group-prepend",children:Object(v.jsxs)("select",{className:"btn m-2",onChange:u("category"),children:[Object(v.jsx)("option",{value:"All",children:"All"}),a.map((function(e,t){return Object(v.jsx)("option",{value:e._id,children:e.name},t)}))]})}),Object(v.jsx)("input",{type:"search",className:"form-control",onChange:u("search"),placeholder:"Search by name"})]}),Object(v.jsx)("div",{className:"btn input-group-append",style:{border:"none"},children:Object(v.jsx)("button",{className:"input-group-text",children:"Search"})})]})}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"mb-4 mt-4",children:j(l,e)}),Object(v.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(v.jsx)(F,{product:e},t)}))})]})}(i)]})})})}c(48);var K=c(30),W=c.n(K),X=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/braintree/get-token/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/braintree/payment/").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(n)});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/order/create/").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({order:n})});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/order/list/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/order/status-values/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/order/").concat(n,"/status/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({status:r,orderId:n})});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n,r){return e.apply(this,arguments)}}(),re=function(e){var t=e.products,c=Object(n.useState)({success:!1,clientToken:null,error:"",instance:{},address:"",loading:!1}),r=Object(T.a)(c,2),a=r[0],s=r[1],i=p()&&p().foundUser._id,l=p()&&p().token;Object(n.useEffect)((function(){!function(e,t){X(e,t).then((function(e){e.error?s(Object(h.a)(Object(h.a)({},e),{},{error:e.error})):s({clientToken:e.clientToken})}))}(i,l)}),[]);var u,d,j,b=function(e){s(Object(h.a)(Object(h.a)({},a),{},{address:e.target.value}))},m=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},O=function(){return Object(v.jsx)("div",{onBlur:function(){return s(Object(h.a)(Object(h.a)({},a),{},{error:""}))},children:null!==a.clientToken&&t.length>0?Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"form-group mb-3",children:[Object(v.jsx)("label",{className:"text-muted",children:"Delivery address:"}),Object(v.jsx)("textarea",{onChange:b,className:"form-control",value:a.address,placeholder:"Type your delivery address here..."})]}),Object(v.jsx)(W.a,{options:{authorization:a.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return a.instance=e}}),Object(v.jsx)("button",{onClick:x,className:"btn btn-sm btn-danger",children:"Confirm"})]}):null})},f=a.address,x=function(){s({loading:!0});a.instance.requestPaymentMethod().then((function(e){var c={paymentMethodNonce:e.nonce,amount:m()};Z(i,l,c).then((function(c){s(Object(h.a)(Object(h.a)({},e),{},{success:c.success}));var n={products:t,transaction_id:c.transaction_id,amount:c.transaction.amount,address:f};ee(i,l,n).then((function(e){var t;t=function(){console.log("Payment complete. Empty cart"),s({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t())})).catch((function(e){console.log(e),s({loading:!1})}))})).catch((function(e){console.log(e),s({loading:!1})}))})).catch((function(e){s(Object(h.a)(Object(h.a)({},a),{},{error:e.message}))}))};return Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{className:"lead",children:["Total: $",m()]}),(j=a.loading,j&&Object(v.jsx)("p",{className:"lead",children:"Loading..."})),(d=a.error,Object(v.jsx)("div",{className:"alert alert-danger",style:{display:d?"":"none"},children:d})),(u=a.success,Object(v.jsx)("div",{className:"alert alert-success",style:{display:u?"":"none"},children:"Thanks! Your payment was successfull!"})),p()?Object(v.jsx)("div",{children:O()}):Object(v.jsx)(o.b,{to:"/signin",children:Object(v.jsx)("button",{className:"btn btn-warning btn-sm",children:"Sign in to checkout"})})]})};function ae(e){var t=e.prices,c=e.handleFilters,r=Object(n.useState)(0),a=Object(T.a)(r,2),s=(a[0],a[1]),o=function(e){c(e.target.value),s(e.target.value)};return Object(v.jsx)(v.Fragment,{children:t.map((function(e,t){return Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{onChange:o,value:"".concat(e._id),name:e,type:"radio",className:"form-check-input"}),Object(v.jsx)("label",{htmlFor:"name",className:"form-check-label",children:e.name})]},t)}))})}function se(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)({filters:{category:[],price:[]}}),s=Object(T.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(6),u=Object(T.a)(l,2),d=u[0],j=(u[1],Object(n.useState)(0)),b=Object(T.a)(j,2),m=b[0],p=b[1],O=Object(n.useState)(0),f=Object(T.a)(O,2),g=f[0],y=f[1],w=Object(n.useState)([]),S=Object(T.a)(w,2),k=S[0],C=S[1],P=Object(n.useState)(!1),A=Object(T.a)(P,2),I=(A[0],A[1]),E=function(e){$(m,d,e).then((function(e){e.error?I(e.error):(C(e.data),y(e.size),y(e.size),p(0))}))},U=function(){var e=m+d;$(e,d,o.filters).then((function(t){t.error?I(t.error):(C([].concat(Object(_.a)(t.data),Object(_.a)(t.data))),y(t.size),y(t.size),p(e))}))};Object(n.useEffect)((function(){B().then((function(e){e.error?I(e.error):r(e)})),E(m,o.filters)}),[]);var J=function(e,t){var c=Object(h.a)({},o);if(c.filters[t]=e,"price"===t){var n=z(e);c.filters[t]=n}E(o.filters),i(c)},z=function(e){var t=x,c=[];for(var n in t)t[n]._id===parseInt(e)&&(c=t[n].array);return c};return Object(v.jsx)(N,{title:"Shop",description:"Search and find books of your choice.",className:"container",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-2",children:[Object(v.jsx)("p",{className:"font-weight-bold",children:"Filter by Categories"}),Object(v.jsx)("ul",{children:Object(v.jsx)(D,{categories:c,handleFilters:function(e){return J(e,"category")}})}),Object(v.jsx)("p",{className:"font-weight-bold",children:"Filter by Prices"}),Object(v.jsx)("div",{className:"ml-4",children:Object(v.jsx)(ae,{prices:x,handleFilters:function(e){return J(e,"price")}})})]}),Object(v.jsxs)("div",{className:"col-10",children:[Object(v.jsx)("h4",{className:"mb-4",children:"Products"}),Object(v.jsx)("div",{className:"row",children:k.map((function(e,t){return Object(v.jsx)("div",{className:"col-4 mb-3",children:Object(v.jsx)(F,{product:e})},t)}))}),Object(v.jsx)("hr",{}),g>0&&g>=d&&Object(v.jsx)("button",{onClick:U,className:"btn btn-warning mb-5",children:"Load More"})]})]})})}var oe=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(T.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(!1),u=Object(T.a)(l,2),d=(u[0],u[1]);return Object(n.useEffect)((function(){G("createdAt").then((function(e){e.error?d(e.error):i(e)})),G("sold").then((function(e){e.error?d(e.error):r(e)}))}),[]),Object(v.jsxs)(N,{className:"container",title:"Home Page",description:"Shoppers online Ecommerce",children:[Object(v.jsx)(Q,{}),Object(v.jsx)("h3",{className:"mb-4",children:"Best Sellers"}),Object(v.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(v.jsx)("div",{className:"col-md-4 mb-3",children:Object(v.jsx)(F,{product:e})},t)}))}),Object(v.jsx)("h3",{className:"mb-4",children:"New Arrivals"}),Object(v.jsx)("div",{className:"row",children:o.map((function(e,t){return Object(v.jsx)("div",{className:"col-md-4 mb-3",children:Object(v.jsx)(F,{product:e},t)},t)}))})]})};var ie=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:""}),t=Object(T.a)(e,2),c=t[0],r=t[1],a=c.name,s=c.email,o=c.password,i=c.error,l=c.success,u=function(e){return function(t){r(Object(h.a)(Object(h.a)({},c),{},Object(E.a)({error:!1},e,t.target.value)))}},d=function(e){e.preventDefault(),j({name:a,email:s,password:o}).then((function(e){e.error?r(Object(h.a)(Object(h.a)({},c),{},{error:e.error,success:!1})):r(Object(h.a)(Object(h.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return Object(v.jsxs)(N,{title:"Signup",description:"Register for an account to get started",className:"container col-md-4 offset-md-4",children:[Object(v.jsx)("div",{className:"alert alert-danger",style:{display:i?"":"none"},children:i}),Object(v.jsx)("div",{className:"alert alert-success",style:{display:l?"":"none"},children:"Congrats! New Account is created. Please signin."}),Object(v.jsxs)("form",{onSubmit:d,children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"name",className:"text-muted",children:"Name"}),Object(v.jsx)("input",{onChange:u("name"),value:a,type:"text",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"email",className:"text-muted",children:"Email"}),Object(v.jsx)("input",{onChange:u("email"),value:s,type:"email",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"password",className:"text-muted",children:"Password"}),Object(v.jsx)("input",{onChange:u("password"),value:o,type:"password",className:"form-control"})]}),Object(v.jsx)("button",{className:"btn btn-primary mt-3",children:"Sign up"})]}),function(){if(p())return Object(v.jsx)(O.a,{to:"/"})}()]})},le=c(1).useState,ue=function(){var e=le({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(T.a)(e,2),c=t[0],n=t[1],r=c.email,a=c.password,s=c.error,o=c.redirectToReferrer,i=(c.loading,p().foundUser),l=function(e){return function(t){n(Object(h.a)(Object(h.a)({},c),{},Object(E.a)({error:!1},e,t.target.value)))}},u=function(e){e.preventDefault(),b({email:r,password:a,loading:!0}).then((function(e){e.error?n(Object(h.a)(Object(h.a)({},c),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){n(Object(h.a)(Object(h.a)({},c),{},{redirectToReferrer:!0}))}))}))};return Object(v.jsxs)(N,{className:"container col-md-4 offset-md-4",title:"Sign In",description:"Login to your Shoppers account",children:[void 0,Object(v.jsx)("div",{className:"alert alert-danger",style:{display:s?"":"none"},children:s}),Object(v.jsxs)("form",{onSubmit:u,children:[Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"email",className:"text-muted",children:"Email"}),Object(v.jsx)("input",{onChange:l("email"),value:r,type:"email",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"password",className:"text-muted",children:"Password"}),Object(v.jsx)("input",{onChange:l("password"),value:a,type:"password",className:"form-control"})]}),Object(v.jsx)("button",{className:"btn btn-primary mt-3",children:"Sign In"})]}),o?i&&1===i.role?Object(v.jsx)(O.a,{to:"/admin/dashboard"}):Object(v.jsx)(O.a,{to:"/user/dashboard"}):p()?Object(v.jsx)(O.a,{to:"/"}):void 0]})},de=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/user/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(l.a.mark((function e(t,c,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/user/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(n)});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/orders/by/user/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}(),me=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),c=t[0],r=t[1],a=p(),s=a.foundUser,i=s._id,l=s.name,u=s.email,d=s.role,j=a.token;Object(n.useEffect)((function(){!function(e,t){be(e,t).then((function(e){e.error?console.log(e.error):r(e)}))}(i,j)}),[]);return Object(v.jsx)(N,{className:"container",title:"Dashboard",description:"Hey ".concat(l,"!"),children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-md-3",children:Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("h5",{className:"card-header",children:"User Links"}),Object(v.jsxs)("ul",{className:"list-group",children:[Object(v.jsx)("li",{className:"list-group-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/cart",children:"Cart"})}),Object(v.jsx)("li",{className:"list-group-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/profile/".concat(i),children:"Update Profile"})})]})]})}),Object(v.jsxs)("div",{className:"col-md-9",children:[Object(v.jsxs)("div",{className:"card mb-5",children:[Object(v.jsx)("h5",{className:"card-header",children:"User Information"}),Object(v.jsxs)("ul",{className:"list-group",children:[Object(v.jsx)("li",{className:"list-group-item",children:l}),Object(v.jsx)("li",{className:"list-group-item",children:u}),Object(v.jsx)("li",{className:"list-group-item",children:1===d?"Admin":"Registered User"})]})]}),Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("h5",{className:"card-header",children:"Purchase history"}),Object(v.jsx)("ul",{className:"list-group",children:Object(v.jsx)("li",{className:"list-group-item",children:c.map((function(e,t){return Object(v.jsxs)("div",{children:[Object(v.jsx)("hr",{}),e.products.map((function(t,c){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h6",{children:["Product name: ",t.name]}),Object(v.jsxs)("h6",{children:["Product price: ",t.price]}),Object(v.jsxs)("h6",{children:["Purchased date: ",I()(e.createdAt).fromNow()]})]},c)}))]},t)}))})})]})]})]})})},pe=function(){var e=p().foundUser,t=e.name,c=e.email,n=e.role;return Object(v.jsx)(N,{className:"container",title:"Admin Dashboard",description:"Hey ".concat(t,"!"),children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-md-3",children:Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("h5",{className:"card-header",children:"Admin Links"}),Object(v.jsxs)("ul",{className:"list-group",children:[Object(v.jsx)("li",{className:"list-group-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/admin/category/create",children:"Create Category"})}),Object(v.jsx)("li",{className:"list-group-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/admin/product/create",children:"Create Product"})}),Object(v.jsx)("li",{className:"list-group-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/admin/orders",children:"View Orders"})}),Object(v.jsx)("li",{className:"list-group-item",children:Object(v.jsx)(o.b,{className:"nav-link",to:"/admin/products",children:"Manage Products"})})]})]})}),Object(v.jsx)("div",{className:"col-md-9",children:Object(v.jsxs)("div",{className:"card mb-5",children:[Object(v.jsx)("h5",{className:"card-header",children:"Admin Information"}),Object(v.jsxs)("ul",{className:"list-group",children:[Object(v.jsx)("li",{className:"list-group-item",children:t}),Object(v.jsx)("li",{className:"list-group-item",children:c}),Object(v.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registered User"})]})]})})]})})},he=function(){var e=Object(n.useState)(""),t=Object(T.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(T.a)(a,2),i=s[0],l=s[1],u=Object(n.useState)(!1),d=Object(T.a)(u,2),j=d[0],b=d[1],m=p(),h=m.foundUser,O=m.token,f=function(e){l(""),r(e.target.value)},x=function(e){e.preventDefault(),l(""),U(h._id,O,{name:c}).then((function(e){e.error?l(e.error):(r(""),l(""),b(!0))}))};return Object(v.jsx)(N,{className:"container ",title:"Add new category",description:"Hey ".concat(h.name,", ready to add new category"),children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-4 offset-4",children:[function(){if(i)return Object(v.jsx)("div",{className:"alert alert-danger",children:Object(v.jsx)("span",{className:"text-danger p-0",children:"Category should be unique"})})}(),function(){if(j)return Object(v.jsx)("div",{className:"alert alert-success",children:Object(v.jsx)("span",{className:"text-success p-0",children:"Category is created"})})}(),Object(v.jsxs)("form",{onSubmit:x,children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"name",className:"text-muted",children:"Name"}),Object(v.jsx)("input",{onChange:f,value:c,autoFocus:!0,required:!0,type:"text",className:"form-control"})]}),Object(v.jsx)("button",{className:"btn btn-outline-secondary mt-3",children:"Create Category"})]}),Object(v.jsx)("div",{className:"mt-5",children:Object(v.jsx)(o.b,{to:"/admin/dashboard",children:"Back to Dashboard"})})]})})})},Oe=function(){var e=Object(n.useState)({name:"",description:"",price:"",quantity:"",shipping:"",photo:"",categories:[],category:"",error:"",success:"",loading:!1,redirectToProfile:!1,formData:""}),t=Object(T.a)(e,2),c=t[0],r=t[1],a=c.name,s=c.description,o=c.price,i=c.quantity,l=c.categories,u=c.error,d=c.success,j=c.loading,b=c.formData;Object(n.useEffect)((function(){B().then((function(e){e.error?r(Object(h.a)(Object(h.a)({},c),{},{error:e.error})):r(Object(h.a)(Object(h.a)({},c),{},{categories:e,formData:new FormData}))}))}),[]);var m=p(),O=m.foundUser,f=m.token,x=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;b.set(e,n),r(Object(h.a)(Object(h.a)({},c),{},Object(E.a)({},e,n)))}},g=function(e){e.preventDefault(),r(Object(h.a)(Object(h.a)({},c),{},{error:"",loading:!0})),q(O._id,f,b).then((function(e){e.error?r(Object(h.a)(Object(h.a)({},c),{},{error:e.error,success:!1,loading:!1})):r(Object(h.a)(Object(h.a)({},c),{},{name:"",description:"",price:"",quantity:"",shipping:"",photo:"",categories:[],category:"",error:"",success:!0,loading:!1,formData:""}))}))};return Object(v.jsx)(N,{className:"container mb-5",title:"Add new product",description:"Hey ".concat(O.name,", ready to add new product"),children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-4 offset-4",children:[j&&Object(v.jsx)("div",{className:"alert alert-info",children:Object(v.jsx)("p",{className:"lead",children:"Loading..."})}),Object(v.jsx)("div",{className:"alert alert-success",style:{display:d?"":"none"},children:"Product created successfully"}),Object(v.jsx)("div",{className:"alert alert-danger",style:{display:u?"":"none"},children:u}),Object(v.jsxs)("form",{onSubmit:g,children:[Object(v.jsx)("h5",{children:"Upload Photo"}),Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("label",{className:"btn btn-secondary",children:Object(v.jsx)("input",{onChange:x("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Name"}),Object(v.jsx)("input",{onChange:x("name"),value:a,type:"text",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"descrition",children:"Description"}),Object(v.jsx)("textarea",{onChange:x("description"),value:s,className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Price"}),Object(v.jsx)("input",{onChange:x("price"),value:o,type:"number",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Quantity"}),Object(v.jsx)("input",{onChange:x("quantity"),value:i,type:"number",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"category",children:"Category"}),Object(v.jsxs)("select",{onChange:x("category"),className:"form-control",children:[Object(v.jsx)("option",{children:"Please select"}),l&&l.map((function(e,t){return Object(v.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"shipping",children:"Shipping"}),Object(v.jsxs)("select",{onChange:x("shipping"),className:"form-control",children:[Object(v.jsx)("option",{children:"Please select"}),Object(v.jsx)("option",{value:"0",children:"No"}),Object(v.jsx)("option",{value:"1",children:"Yes"})]})]}),Object(v.jsx)("button",{className:"btn btn-dark mt-4",children:"Create Product"})]}),void 0]})})})},fe=function(e){var t=e.match,c=Object(n.useState)({name:"",description:"",price:"",quantity:"",shipping:"",photo:"",categories:[],category:"",error:"",success:"",loading:!1,redirectToProfile:!1,formData:""}),r=Object(T.a)(c,2),a=r[0],s=r[1],o=a.name,i=a.description,l=a.price,u=a.quantity,d=a.categories,j=a.error,b=a.success,m=a.loading,f=a.formData,x=a.redirectToProfile,g=function(){B().then((function(e){e.error?s(Object(h.a)(Object(h.a)({},a),{},{error:e.error})):s({categories:e,formData:new FormData})}))};Object(n.useEffect)((function(){var e;g(),e=t.params.productId,V(e).then((function(e){e.error?s(Object(h.a)(Object(h.a)({},a),{},{error:e.error})):(s(Object(h.a)(Object(h.a)({},a),{},{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),g())}))}),[]);var y=p(),w=y.foundUser,S=y.token,k=function(e){return function(t){var c="photo"===e?t.target.files[0]:t.target.value;f.set(e,c),s(Object(h.a)(Object(h.a)({},a),{},Object(E.a)({},e,c)))}},C=function(e){e.preventDefault(),s(Object(h.a)(Object(h.a)({},a),{},{error:"",loading:!0})),Y(t.params.productId,w._id,S,f).then((function(e){e.error?s(Object(h.a)(Object(h.a)({},a),{},{error:e.error,success:!1,loading:!1})):s(Object(h.a)(Object(h.a)({},a),{},{name:"",description:"",price:"",quantity:"",shipping:"",photo:"",categories:[],category:"",error:!1,redirectToProfile:!0,success:!0,loading:!1,formData:""}))}))};return Object(v.jsx)(N,{className:"container mb-5",title:"Add new product",description:"Hey ".concat(w.name,", ready to add new product"),children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-4 offset-4",children:[m&&Object(v.jsx)("div",{className:"alert alert-info",children:Object(v.jsx)("p",{className:"lead",children:"Loading..."})}),Object(v.jsx)("div",{className:"alert alert-success",style:{display:b?"":"none"},children:"Product updated successfully"}),Object(v.jsx)("div",{className:"alert alert-danger",style:{display:j?"":"none"},children:j}),Object(v.jsxs)("form",{onSubmit:C,children:[Object(v.jsx)("h5",{children:"Upload Photo"}),Object(v.jsx)("div",{className:"form-group",children:Object(v.jsx)("label",{className:"btn btn-secondary",children:Object(v.jsx)("input",{onChange:k("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Name"}),Object(v.jsx)("input",{onChange:k("name"),value:o,type:"text",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"descrition",children:"Description"}),Object(v.jsx)("textarea",{onChange:k("description"),value:i,className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Price"}),Object(v.jsx)("input",{onChange:k("price"),value:l,type:"number",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Quantity"}),Object(v.jsx)("input",{onChange:k("quantity"),value:u,type:"number",className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"category",children:"Category"}),Object(v.jsxs)("select",{onChange:k("category"),className:"form-control",children:[Object(v.jsx)("option",{children:"Please select"}),d&&d.map((function(e,t){return Object(v.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(v.jsxs)("div",{className:"form-group mt-2",children:[Object(v.jsx)("label",{htmlFor:"shipping",children:"Shipping"}),Object(v.jsxs)("select",{onChange:k("shipping"),className:"form-control",children:[Object(v.jsx)("option",{children:"Please select"}),Object(v.jsx)("option",{value:"0",children:"No"}),Object(v.jsx)("option",{value:"1",children:"Yes"})]})]}),Object(v.jsx)("button",{className:"btn btn-sm btn-dark mt-4",children:"Update Product"})]}),void 0,function(){if(x&&!j)return Object(v.jsx)(O.a,{to:"/"})}()]})})})},xe=function(e){var t=Object(n.useState)({}),c=Object(T.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)([]),o=Object(T.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(T.a)(u,2),j=(d[0],d[1]);return Object(n.useEffect)((function(){!function(e){V(e).then((function(e){e.error?j(e.error):(a(e),H(e._id).then((function(e){e.error?j(e.error):l(e)})))}))}(e.match.params.productId)}),[e]),Object(v.jsx)(N,{title:r.name,description:r&&r.description&&r.description.substring(0,100),className:"container",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-md-8",children:r&&r.description&&Object(v.jsx)(F,{product:r,showViewProductButton:!1})}),Object(v.jsxs)("div",{className:"col-md-4",children:[Object(v.jsx)("h4",{children:"Related products"}),i.map((function(e,t){return Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)(F,{product:e},t)})}))]})]})})},ve=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),c=t[0],r=t[1];Object(n.useEffect)((function(){r("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[]);return Object(v.jsx)(N,{title:"Shopping Cart",description:"Manage your cart items. Add remove checkout or continue shopping.",className:"container",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-md-6",children:c.length>0?Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{className:"lead",children:["Your cart has ","".concat(c.length)," item(s)"]}),Object(v.jsx)("hr",{}),c.map((function(e,t){return Object(v.jsx)(F,{product:e,cartUpdate:!0,showAddToCartButton:!1,showRemoveProductButton:!0},t)}))]}):void o.b}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("h4",{className:"mb-3",children:"Order Summary"}),Object(v.jsx)("hr",{}),Object(v.jsx)(re,{products:c})]})]})})},ge=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(T.a)(a,2),o=s[0],i=s[1],l=p(),u=l.foundUser,d=u._id,j=u.name,b=l.token,m=function(){te(d,b).then((function(e){e.error?console.log(e.error):r(e)}))};Object(n.useEffect)((function(){m(),ce(d,b).then((function(e){e.error?console.log(e.error):i(e)}))}),[]);var h=function(e,t){return Object(v.jsxs)("div",{className:"input-group mb-2 mr-sm-2",children:[Object(v.jsx)("div",{className:"input-group-prepend",children:Object(v.jsx)("div",{className:"input-group-text",children:e})}),Object(v.jsx)("input",{type:"text",value:t,className:"form-control",readOnly:!0})]})},O=function(e){return Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsxs)("h3",{className:"mark mb-4",children:["Status:",e.status]}),Object(v.jsxs)("select",{className:"form-control",onChange:function(t){return function(e,t){ne(d,b,t,e.target.value).then((function(e){e.error?console.log("Status update failed"):m()}))}(t,e._id)},children:[Object(v.jsx)("option",{children:"Update Status"}),o.map((function(e,t){return Object(v.jsx)("option",{value:e,children:e},t)}))]})]})};return Object(v.jsx)(N,{className:"container ",title:"Orders",description:"Hey ".concat(j,", you can manage all the orders here"),children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-8 offset-md-2",children:[c.length>0?Object(v.jsxs)("h5",{className:"text-danger display-5",children:["Total orders:",c.length]}):Object(v.jsx)("h5",{className:"text-danger",children:"No orders"}),c.map((function(e,t){return Object(v.jsxs)("div",{className:"mt-5",style:{borderBottom:"5px solid indigo"},children:[Object(v.jsxs)("h4",{className:"bg-primary",children:["Order ID:",e._id]}),Object(v.jsxs)("ul",{className:"list-group mb-2",children:[Object(v.jsxs)("li",{className:"list-group-item",children:["Status: ",O(e)]}),Object(v.jsxs)("li",{className:"list-group-item",children:["Transaction ID: ",e.transaction_id]}),Object(v.jsxs)("li",{className:"list-group-item",children:["Delivery address: ",e.address]}),Object(v.jsxs)("li",{className:"list-group-item",children:["Ordered on: ",I()(e.createdAt).fromNow()]})]}),Object(v.jsxs)("h3",{className:"mt-4 mb-4 font-italic",children:["Total products in the order:",e.products.length]}),e.products.map((function(e,t){return Object(v.jsxs)("div",{className:"mb-4",style:{padding:"20px",border:"1px solid lightgreen"},children:[h("Product name",e.name),h("Product price",e.price),h("Product total",e.count),h("Product Id",e._id)]},t)}))]},t)}))]})})})},Ne=function(e){var t=e.match,c=Object(n.useState)({name:"",email:"",password:"",error:!1,success:!1}),r=Object(T.a)(c,2),a=r[0],s=r[1],o=a.name,i=a.email,l=a.password,u=a.success,d=p().token;Object(n.useEffect)((function(){var e;e=t.params.userId,de(e,d).then((function(e){e.error?s(Object(h.a)(Object(h.a)({},a),{},{error:!0})):s(Object(h.a)(Object(h.a)({},a),{},{name:e.name,email:e.email}))}))}),[]);var j=function(e){return function(t){s(Object(h.a)(Object(h.a)({},a),{},Object(E.a)({error:!1},e,t.target.value)))}},b=function(e){e.preventDefault(),je(t.params.userId,d,{name:o,email:i,password:l}).then((function(e){e.error?s(Object(h.a)(Object(h.a)({},a),{},{error:!0})):function(e,t){try{if("undefined"!==typeof window&&localStorage.getItem("jwt")){var c=JSON.parse(localStorage.getItem("jwt"));c.foundUser=e,localStorage.setItem("jwt",JSON.stringify(c)),t()}}catch(n){console.log(n)}}(e,(function(){s(Object(h.a)(Object(h.a)({},a),{},{name:e.name,email:e.email,success:!0}))}))}))};return Object(v.jsxs)(N,{title:"Profile",description:"Update your profile",className:"container",children:[function(e,t,c){return Object(v.jsxs)("form",{children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"name",className:"text-muted",children:"Name"}),Object(v.jsx)("input",{type:"text",onChange:j("name"),value:e,className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"email",className:"text-muted",children:"Email"}),Object(v.jsx)("input",{type:"email",onChange:j("email"),value:t,className:"form-control"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"password",className:"text-muted",children:"Password"}),Object(v.jsx)("input",{type:"password",onChange:j("password"),value:c,className:"form-control"})]}),Object(v.jsx)("button",{onClick:b,className:"btn btn-primary btn-sm",children:"Submit"})]})}(o,i,l),function(e){if(e)return Object(v.jsx)(O.a,{to:"/cart"})}(u)]})},ye=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),c=t[0],r=t[1],a=p(),s=a.foundUser._id,i=a.token,l=function(){L().then((function(e){e.error?console.log(e.error):r(e)}))};return Object(n.useEffect)((function(){l()}),[]),Object(v.jsx)(N,{title:"Manage Products",description:"Perform CRUD operations",className:"container",children:Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-md-12",children:[Object(v.jsxs)("p",{className:"lead",children:["Total (",c.length,") products"]}),Object(v.jsx)("ul",{className:"list-group",children:c.map((function(e,t){return Object(v.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(v.jsx)("strong",{children:e.name}),Object(v.jsxs)("div",{className:"div d-flex justify-content-between align-items-center",children:[Object(v.jsx)(o.b,{to:"/admin/product/update/".concat(e._id),children:Object(v.jsx)("span",{className:"btn btn-sm btn-warning",children:"Update"})}),Object(v.jsx)("span",{onClick:function(){return t=e._id,void M(t,s,i).then((function(e){e.error?console.log(e.error):l()}));var t},className:"btn btn-sm btn-danger ml-2",children:"Trash"})]})]},t)}))})]})})})})},we=function(){return Object(v.jsxs)(O.d,{children:[Object(v.jsx)(O.b,{exact:!0,path:"/",component:oe}),Object(v.jsx)(O.b,{exact:!0,path:"/shop",component:se}),Object(v.jsx)(O.b,{exact:!0,path:"/signup",component:ie}),Object(v.jsx)(O.b,{exact:!0,path:"/signin",component:ue}),Object(v.jsx)(S,{exact:!0,path:"/user/dashboard",component:me}),Object(v.jsx)(S,{exact:!0,path:"/admin/dashboard",component:pe}),Object(v.jsx)(O.b,{exact:!0,path:"/products/:productId",component:xe}),Object(v.jsx)(O.b,{exact:!0,path:"/cart",component:ve}),Object(v.jsx)(C,{exact:!0,path:"/admin/category/create",component:he}),Object(v.jsx)(C,{exact:!0,path:"/admin/product/create",component:Oe}),Object(v.jsx)(C,{exact:!0,path:"/admin/products",component:ye}),Object(v.jsx)(C,{exact:!0,path:"/admin/product/update/:productId",component:fe}),Object(v.jsx)(C,{exact:!0,path:"/admin/orders",component:ge}),Object(v.jsx)(S,{exact:!0,path:"/profile/:userId",component:Ne})]})};var Se=function(){return Object(v.jsx)("div",{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(we,{})})})};c(64);s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(Se,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.c0ed3ac5.chunk.js.map